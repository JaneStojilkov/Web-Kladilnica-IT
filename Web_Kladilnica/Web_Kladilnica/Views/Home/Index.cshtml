@model  Web_Kladilnica.Models.TicketGamesView

@{
    ViewBag.Title = "Index";
}
@Styles.Render("~/Content/css")
<script src="~/Scripts/jquery-1.7.1.min.js" type="text/javascript"></script>
<script src="~/Scripts/jquery.unobtrusive-ajax.min.js" type="text/javascript"></script>
<script src="https://kit.fontawesome.com/8eb5fa4392.js"></script>

<ul class="nav nav-tabs">
    <li role="presentation" class="active" sport="Football"><a href="#" onclick="loadGames('Football')"><i class="fas fa-futbol"></i> Football</a></li>
    <li role="presentation" sport="Basketball"><a href="#" onclick="loadGames('Basketball')"><i class="fas fa-basketball-ball"></i> Basketball</a></li>
    <li role="presentation" sport="Baseball"><a href="#" onclick="loadGames('Baseball')"><i class="fas fa-baseball-ball"></i> Baseball</a></li>
</ul>
<div class="igri">
    @Html.Action("GamesPartial", "Home", new { izbor = "Football" })
</div>
<br />
@using (Html.BeginForm("CreatingTicket", "Home"))
{
    @Html.HiddenFor(m => m.ids)
    @Html.HiddenFor(m => m.gameCoef)
    <button type="submit" class="btn btn-primary" onclick="updateStuff()">Preview </button>

}
@section scripts{
    @Scripts.Render("~/bundles/jquery")
    @Scripts.Render("~/bundles/bootstrap")
    <script src="~/Scripts/jquery-3.3.1.js"></script>

    <script>
        var TypeOfCoef = [];
        var GameId = [];
        var i = 0;
       const ClickCoef = function(){

            var flag = false;
            var StoppedId;
            for (var j = 0; j < i; j++) {
                if (GameId[j] == event.target.name.toString()) {
                    flag = true;
                    StoppedId = j;
                    break;
                }
            }
            if (flag == false) {
                GameId[i] = event.target.name.toString();
                TypeOfCoef[i] = event.target.id.toString();
                i++;
            }
            else {
                TypeOfCoef[StoppedId] = event.target.id.toString();
            }
        }
        const updateStuff = function(){
            document.getElementById("ids").value = GameId;
            document.getElementById("gameCoef").value = TypeOfCoef;
        }
        var aktivno = $(".active").attr("sport");
        const loadGames = function (tip) {
            $.ajax({
                type: "POST",
                url: "/Home/GamesPartial/",
                data: { izbor: tip },
                success: function (result) {
                    $(".igri").html(result);

                }
            })
        }

            $(document).ready(function () {

                $("li").click(function () {
                    aktivno = $(this).attr("sport");
                    $(this).addClass("active").siblings().removeClass("active");

                })
                


            });




    </script>
}